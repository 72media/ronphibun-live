<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>‡∏ï‡∏•‡∏≤‡∏î‡∏£‡πà‡∏≠‡∏ô‡∏û‡∏¥‡∏ö‡∏π‡∏•‡∏¢‡πå - ‡∏Å‡∏•‡πâ‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®</title>
  <link href="https://fonts.googleapis.com/css2?family=Kanit&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Kanit', sans-serif;
      background-color: #f4f4f4;
      margin: 0;
      padding: 0;
      text-align: center;
      color: #333;
    }

    header {
      background-color: #007BFF;
      color: white;
      padding: 1.5rem 0;
      font-size: 2rem;
    }

    .container {
      padding: 2rem 1rem;
    }

    .snapshot {
      max-width: 100%;
      height: auto;
      border-radius: 10px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
      margin-bottom: 2rem;
    }

    .weather {
      background: white;
      display: inline-block;
      padding: 1.5rem 2rem;
      border-radius: 12px;
      box-shadow: 0 0 15px rgba(0,0,0,0.1);
      font-size: 1.2rem;
      line-height: 1.8;
      margin-bottom: 2rem;
    }

    .video-container iframe,
    .map-container iframe {
      width: 100%;
      max-width: 800px;
      height: 450px;
      border-radius: 10px;
      border: none;
      margin-bottom: 2rem;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }

    .highlight {
      color: #d63333;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <header>üìç ‡∏ï‡∏•‡∏≤‡∏î‡∏£‡πà‡∏≠‡∏ô‡∏û‡∏¥‡∏ö‡∏π‡∏•‡∏¢‡πå - ‡∏Å‡∏•‡πâ‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®</header>

  <div class="container">
    <img id="snapshot" class="snapshot" src="snapshots/latest.jpg" alt="‡∏†‡∏≤‡∏û‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏à‡∏≤‡∏Å‡∏Å‡∏•‡πâ‡∏≠‡∏á">

    <div class="weather">
      <div id="time" class="highlight">‡πÄ‡∏ß‡∏•‡∏≤: --:--:--</div>
      <div id="temp">üå°Ô∏è ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥: ...</div>
      <div id="wind">üå¨Ô∏è ‡∏•‡∏°: ...</div>
      <div id="desc">‚òÅÔ∏è ‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®: ...</div>
    </div>

    <div class="video-container">
      <h3>üé• ‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏ñ‡πà‡∏≤‡∏¢‡∏ó‡∏≠‡∏î‡∏™‡∏î</h3>
      <iframe src="https://demo.flashphoner.com:8888/embed_player?urlServer=wss://demo.flashphoner.com:8443&amp;streamName=rtsp%3A%2F%2Fadmin%3Apk%400639544615%40ramrome.thddns.net%3A3381%2Fstream1&amp;mediaProviders=WebRTC,MSE" allowfullscreen></iframe>
    </div>

    <div class="map-container">
      <h3>üåÄ ‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏à‡∏≤‡∏Å Windy</h3>
      <iframe src="https://embed.windy.com/embed.html?type=map&amp;location=coordinates&amp;metricRain=default&amp;metricTemp=default&amp;metricWind=default&amp;zoom=10&amp;overlay=radar&amp;product=radar&amp;level=surface&amp;lat=8.017&amp;lon=100.077&amp;detailLat=8.129&amp;detailLon=99.886&amp;detail=true"></iframe>
    </div>
  </div>

  <script>
    function updateTime() {
      const now = new Date();
      const options = { timeZone: 'Asia/Bangkok', hour: '2-digit', minute: '2-digit', second: '2-digit' };
      document.getElementById('time').innerText = `‡πÄ‡∏ß‡∏•‡∏≤: ${now.toLocaleTimeString('th-TH', options)}`;
    }

    async function fetchWeather() {
      try {
        const res = await fetch('https://api.open-meteo.com/v1/forecast?latitude=8.322&longitude=99.949&current=temperature_2m,wind_speed_10m,weather_code&timezone=Asia%2FBangkok');
        const data = await res.json();
        const w = data.current;
        const weatherDesc = {
          0: '‡πÅ‡∏à‡πà‡∏°‡πÉ‡∏™', 1: '‡∏°‡∏µ‡πÄ‡∏°‡∏Ü‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢', 2: '‡∏°‡∏µ‡πÄ‡∏°‡∏Ü‡∏ö‡∏≤‡∏á‡∏™‡πà‡∏ß‡∏ô', 3: '‡∏°‡∏µ‡πÄ‡∏°‡∏Ü‡∏°‡∏≤‡∏Å',
          45: '‡∏´‡∏°‡∏≠‡∏Å', 48: '‡∏´‡∏°‡∏≠‡∏Å‡∏ô‡πâ‡∏≥‡πÅ‡∏Ç‡πá‡∏á', 51: '‡∏ù‡∏ô‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢', 53: '‡∏ù‡∏ô‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á',
          55: '‡∏ù‡∏ô‡∏´‡∏ô‡∏±‡∏Å', 61: '‡∏ù‡∏ô‡πÄ‡∏ö‡∏≤', 63: '‡∏ù‡∏ô‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á', 65: '‡∏ù‡∏ô‡∏´‡∏ô‡∏±‡∏Å',
          80: '‡∏ù‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏ä‡πà‡∏ß‡∏á', 95: '‡∏û‡∏≤‡∏¢‡∏∏‡∏ù‡∏ô‡∏ü‡πâ‡∏≤‡∏Ñ‡∏∞‡∏ô‡∏≠‡∏á', 99: '‡∏û‡∏≤‡∏¢‡∏∏‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á'
        };
        document.getElementById('temp').innerText = `üå°Ô∏è ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥: ${w.temperature_2m}¬∞C`;
        document.getElementById('wind').innerText = `üå¨Ô∏è ‡∏•‡∏°: ${w.wind_speed_10m} km/h`;
        document.getElementById('desc').innerText = `‚òÅÔ∏è ‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®: ${weatherDesc[w.weather_code] || '‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö'}`;
      } catch (e) {
        document.getElementById('desc').innerText = '‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏≤‡∏Å‡∏≤‡∏®';
      }
    }

    function refreshSnapshot() {
      document.getElementById('snapshot').src = `snapshots/latest.jpg?${Date.now()}`;
    }

    updateTime();
    fetchWeather();
    refreshSnapshot();
    setInterval(updateTime, 1000);
    setInterval(refreshSnapshot, 5 * 60 * 1000);
    setInterval(fetchWeather, 10 * 60 * 1000);
  </script>
</body>
</html>
