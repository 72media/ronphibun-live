<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>‡∏ï‡∏•‡∏≤‡∏î‡∏£‡πà‡∏≠‡∏ô‡∏û‡∏¥‡∏ö‡∏π‡∏•‡∏¢‡πå - ‡∏†‡∏≤‡∏û‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</title>
  <link href="https://fonts.googleapis.com/css2?family=Kanit&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Kanit', sans-serif;
      background: #f3f4f6;
      margin: 0;
      padding: 0;
      text-align: center;
      color: #333;
    }

    header {
      background-color: #007BFF;
      color: white;
      padding: 1.5rem 0;
      font-size: 2rem;
      font-weight: bold;
    }

    .container {
      padding: 2rem 1rem;
    }

    .snapshot {
      max-width: 100%;
      height: auto;
      border-radius: 10px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
      margin-bottom: 1.5rem;
    }

    .weather {
      background: white;
      display: inline-block;
      padding: 1.5rem 2rem;
      border-radius: 12px;
      box-shadow: 0 0 15px rgba(0,0,0,0.1);
      margin-top: 1rem;
      font-size: 1.2rem;
      line-height: 1.8;
    }

    .highlight {
      font-weight: bold;
      color: #d63333;
    }
  </style>
</head>
<body>
  <header>üìç ‡∏ï‡∏•‡∏≤‡∏î‡∏£‡πà‡∏≠‡∏ô‡∏û‡∏¥‡∏ö‡∏π‡∏•‡∏¢‡πå - ‡∏†‡∏≤‡∏û‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</header>

  <div class="container">
    <img id="snapshot" class="snapshot" src="snapshots/latest.jpg" alt="‡∏†‡∏≤‡∏û‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏à‡∏≤‡∏Å‡∏Å‡∏•‡πâ‡∏≠‡∏á">

    <div class="weather">
      <div id="time" class="highlight">‡πÄ‡∏ß‡∏•‡∏≤: --:--:--</div>
      <div id="temp">üå°Ô∏è ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥: ...</div>
      <div id="wind">üå¨Ô∏è ‡∏•‡∏°: ...</div>
      <div id="desc">‚òÅÔ∏è ‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®: ...</div>
    </div>
  </div>

  <script>
    // ‡πÄ‡∏ß‡∏•‡∏≤‡πÑ‡∏ó‡∏¢
    function updateTime() {
      const now = new Date();
      const options = { timeZone: 'Asia/Bangkok', hour: '2-digit', minute: '2-digit', second: '2-digit' };
      document.getElementById('time').innerText = `‡πÄ‡∏ß‡∏•‡∏≤: ${now.toLocaleTimeString('th-TH', options)}`;
    }

    // ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏≤‡∏Å‡∏≤‡∏®
    async function fetchWeather() {
      try {
        const res = await fetch('https://api.open-meteo.com/v1/forecast?latitude=8.322&longitude=99.949&current=temperature_2m,wind_speed_10m,weather_code&timezone=Asia%2FBangkok');
        const data = await res.json();
        const weather = data.current;
        const weatherDesc = {
          0: '‡πÅ‡∏à‡πà‡∏°‡πÉ‡∏™', 1: '‡∏°‡∏µ‡πÄ‡∏°‡∏Ü‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢', 2: '‡∏°‡∏µ‡πÄ‡∏°‡∏Ü‡∏ö‡∏≤‡∏á‡∏™‡πà‡∏ß‡∏ô', 3: '‡∏°‡∏µ‡πÄ‡∏°‡∏Ü‡∏°‡∏≤‡∏Å',
          45: '‡∏´‡∏°‡∏≠‡∏Å', 48: '‡∏´‡∏°‡∏≠‡∏Å‡∏ô‡πâ‡∏≥‡πÅ‡∏Ç‡πá‡∏á', 51: '‡∏ù‡∏ô‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢', 53: '‡∏ù‡∏ô‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á',
          55: '‡∏ù‡∏ô‡∏´‡∏ô‡∏±‡∏Å', 61: '‡∏ù‡∏ô‡πÄ‡∏ö‡∏≤', 63: '‡∏ù‡∏ô‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á', 65: '‡∏ù‡∏ô‡∏´‡∏ô‡∏±‡∏Å',
          80: '‡∏ù‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏ä‡πà‡∏ß‡∏á', 95: '‡∏û‡∏≤‡∏¢‡∏∏‡∏ù‡∏ô‡∏ü‡πâ‡∏≤‡∏Ñ‡∏∞‡∏ô‡∏≠‡∏á', 99: '‡∏û‡∏≤‡∏¢‡∏∏‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á'
        };
        document.getElementById('temp').innerText = `üå°Ô∏è ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥: ${weather.temperature_2m}¬∞C`;
        document.getElementById('wind').innerText = `üå¨Ô∏è ‡∏•‡∏°: ${weather.wind_speed_10m} km/h`;
        document.getElementById('desc').innerText = `‚òÅÔ∏è ‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®: ${weatherDesc[weather.weather_code] || '‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö'}`;
      } catch (err) {
        document.getElementById('desc').innerText = '‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏≤‡∏Å‡∏≤‡∏®';
      }
    }

    // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÅ‡∏Ñ‡∏ä‡∏†‡∏≤‡∏û
    function refreshSnapshot() {
      const img = document.getElementById('snapshot');
      img.src = `snapshots/latest.jpg?${new Date().getTime()}`;
    }

    // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
    updateTime();
    fetchWeather();
    refreshSnapshot();

    // ‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï
    setInterval(updateTime, 1000);
    setInterval(refreshSnapshot, 5 * 60 * 1000); // ‡∏ó‡∏∏‡∏Å 5 ‡∏ô‡∏≤‡∏ó‡∏µ
    setInterval(fetchWeather, 10 * 60 * 1000); // ‡∏ó‡∏∏‡∏Å 10 ‡∏ô‡∏≤‡∏ó‡∏µ
  </script>
</body>
</html>
